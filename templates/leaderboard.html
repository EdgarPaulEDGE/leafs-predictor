{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>Leaderboard</h1>
    <p>Alle Spieler vs. ML-Modell &mdash; Wer tippt am besten?</p>
</div>

{% if lb.users or lb.model.total_games > 0 %}

<!-- Rangliste -->
<div class="card">
    <h2>Rangliste</h2>
    <table class="stats-table lb-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Spieler</th>
                <th>Tipps</th>
                <th>Richtig</th>
                <th>Exakt</th>
                <th>Punkte</th>
                <th>Quote</th>
            </tr>
        </thead>
        <tbody>
            <!-- ML-Modell immer anzeigen -->
            <tr class="lb-model-row">
                <td>ðŸ¤–</td>
                <td><strong>ML-Modell</strong></td>
                <td>{{ lb.model.total_games }}</td>
                <td>{{ lb.model.correct }}</td>
                <td>&mdash;</td>
                <td><span class="badge badge-points">{{ lb.model.total_points }}</span></td>
                <td>{{ lb.model.accuracy }}%</td>
            </tr>
            {% for user in lb.users %}
            <tr class="lb-user-row {% if g.username == user.username %}lb-me{% endif %}">
                <td>
                    {% if user.rank == 1 %}ðŸ¥‡
                    {% elif user.rank == 2 %}ðŸ¥ˆ
                    {% elif user.rank == 3 %}ðŸ¥‰
                    {% else %}{{ user.rank }}
                    {% endif %}
                </td>
                <td>
                    <strong>{{ user.username }}</strong>
                    {% if g.username == user.username %}<span class="lb-you">(Du)</span>{% endif %}
                </td>
                <td>{{ user.total_games }}</td>
                <td>{{ user.correct }}</td>
                <td>{{ user.exact }}</td>
                <td><span class="badge badge-points">{{ user.total_points }}</span></td>
                <td>{{ user.accuracy }}%</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Punktesystem -->
<div class="card">
    <h2>Punktesystem</h2>
    <table class="stats-table">
        <tbody>
            <tr>
                <td>Richtige Tendenz (W/L)</td>
                <td><span class="badge badge-points">1 Punkt</span></td>
            </tr>
            <tr>
                <td>Exaktes Ergebnis</td>
                <td><span class="badge badge-points">3 Punkte</span></td>
            </tr>
        </tbody>
    </table>
</div>

{% else %}
<div class="card">
    <div class="empty-state">
        <p>Noch keine Ergebnisse vorhanden.</p>
        <p>Gib Tipps ab und warte auf die Spielergebnisse!</p>
        <p><a href="{{ url_for('index') }}" class="btn btn-primary">Jetzt tippen!</a></p>
    </div>
</div>
{% endif %}
{% endblock %}
