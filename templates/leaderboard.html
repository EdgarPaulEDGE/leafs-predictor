{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>Leaderboard</h1>
    <p>All Players vs. ML Model &mdash; Who predicts best?</p>
</div>

{% if lb.users or lb.model.total_games > 0 %}

<!-- Rankings -->
<div class="card">
    <h2>Rankings</h2>
    <table class="stats-table lb-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Player</th>
                <th>Predictions</th>
                <th>Correct</th>
                <th>Exact</th>
                <th>Points</th>
                <th>Accuracy</th>
            </tr>
        </thead>
        <tbody>
            <!-- ML-Modell immer anzeigen -->
            <tr class="lb-model-row">
                <td>ðŸ¤–</td>
                <td><strong>ML-Modell</strong></td>
                <td>{{ lb.model.total_games }}</td>
                <td>{{ lb.model.correct }}</td>
                <td>&mdash;</td>
                <td><span class="badge badge-points">{{ lb.model.total_points }}</span></td>
                <td>{{ lb.model.accuracy }}%</td>
            </tr>
            {% for user in lb.users %}
            <tr class="lb-user-row {% if g.username == user.username %}lb-me{% endif %}">
                <td>
                    {% if user.rank == 1 %}ðŸ¥‡
                    {% elif user.rank == 2 %}ðŸ¥ˆ
                    {% elif user.rank == 3 %}ðŸ¥‰
                    {% else %}{{ user.rank }}
                    {% endif %}
                </td>
                <td>
                    <strong>{{ user.username }}</strong>
                    {% if g.username == user.username %}<span class="lb-you">(You)</span>{% endif %}
                </td>
                <td>{{ user.total_games }}</td>
                <td>{{ user.correct }}</td>
                <td>{{ user.exact }}</td>
                <td><span class="badge badge-points">{{ user.total_points }}</span></td>
                <td>{{ user.accuracy }}%</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Scoring System -->
<div class="card">
    <h2>Scoring System</h2>
    <table class="stats-table">
        <tbody>
            <tr>
                <td>Correct Outcome (W/L)</td>
                <td><span class="badge badge-points">1 Point</span></td>
            </tr>
            <tr>
                <td>Exact Score</td>
                <td><span class="badge badge-points">3 Points</span></td>
            </tr>
        </tbody>
    </table>
</div>

{% else %}
<div class="card">
    <div class="empty-state">
        <p>No results available yet.</p>
        <p>Make predictions and wait for the game results!</p>
        <p><a href="{{ url_for('index') }}" class="btn btn-primary">Make a prediction!</a></p>
    </div>
</div>
{% endif %}
{% endblock %}
