{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>Power Rankings</h1>
    <p>Basierend auf Punkte%, L10-Trend und Tordifferenz</p>
</div>

<!-- Tier Legend -->
<div class="pr-tier-legend">
    <span class="pr-tier-badge pr-elite">Elite</span>
    <span class="pr-tier-badge pr-contender">Contender</span>
    <span class="pr-tier-badge pr-bubble">Bubble</span>
    <span class="pr-tier-badge pr-rebuild">Rebuild</span>
</div>

<div class="card">
    <div class="salary-table-wrap">
        <table class="standings-table pr-table">
            <thead>
                <tr>
                    <th style="width:40px">#</th>
                    <th class="standings-team-th">TEAM</th>
                    <th>PWR</th>
                    <th>PTS</th>
                    <th>GP</th>
                    <th>PTS%</th>
                    <th>L10</th>
                    <th class="hide-mobile">GF/G</th>
                    <th class="hide-mobile">GA/G</th>
                    <th class="hide-mobile">DIFF</th>
                    <th>TIER</th>
                </tr>
            </thead>
            <tbody>
                {% for t in teams %}
                <tr class="pr-row pr-{{ t.tier }}">
                    <td class="pr-rank">
                        <span class="pr-rank-num">{{ t.rank }}</span>
                    </td>
                    <td class="standings-team-cell">
                        <a href="/team/{{ t.abbr }}" style="display:flex;align-items:center;gap:0.5rem;text-decoration:none;color:inherit;">
                            <img src="https://assets.nhle.com/logos/nhl/svg/{{ t.abbr }}_dark.svg"
                                 alt="{{ t.abbr }}" class="standings-team-logo">
                            <span class="standings-team-name">{{ t.name }}</span>
                            <span class="standings-team-abbr">{{ t.abbr }}</span>
                        </a>
                    </td>
                    <td class="pr-power-score">
                        <div class="pr-bar-wrap">
                            <div class="pr-bar pr-bar-{{ t.tier }}" style="width: {{ (t.power_score / 80 * 100)|round|int }}%"></div>
                        </div>
                        <span>{{ t.power_score }}</span>
                    </td>
                    <td><strong>{{ t.pts }}</strong></td>
                    <td>{{ t.gp }}</td>
                    <td>{{ t.pts_pct }}%</td>
                    <td>{{ t.l10 }}</td>
                    <td class="hide-mobile">{{ t.gpg }}</td>
                    <td class="hide-mobile">{{ t.gapg }}</td>
                    <td class="hide-mobile {{ 'diff-pos' if t.diff > 0 else 'diff-neg' if t.diff < 0 else '' }}">
                        {{ '%+d'|format(t.diff) }}
                    </td>
                    <td>
                        <span class="pr-tier-badge pr-{{ t.tier }}">
                            {% if t.tier == 'elite' %}üèÜ{% elif t.tier == 'contender' %}‚öîÔ∏è{% elif t.tier == 'bubble' %}ü´ß{% else %}üîß{% endif %}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="card" style="margin-top:1rem;">
    <div class="pr-methodology">
        <h3>Methodik</h3>
        <p>Power Score = <strong>60%</strong> Punkte-Prozent + <strong>25%</strong> L10-Trend + <strong>15%</strong> Tordifferenz/Spiel</p>
    </div>
</div>
{% endblock %}
